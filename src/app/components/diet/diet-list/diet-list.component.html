<div class="component">
  <app-delete-alert [message]="alertMsg" *ngIf="alert" (deleteCancel)="deleteCancel()" (deleteConfirm)="deleteConfirm()"></app-delete-alert>

  <button type="button" class="button" routerLink="/diets/new">Add new</button>
  <div class="search">
    <label for="search">Search for:</label>
    <input type="text" id="search" class="input" [(ngModel)]="searchText" (ngModelChange)="onSearch()">
  </div>

  <hr>

  <div *ngIf="!$diets">
    <span class="sr-only">Loading...</span> 
    <br>
    <div class="spinner-border" role="status"></div>
  </div>

  <table *ngIf="$diets">
    <tr *ngFor="let diet of dietsToDisplay">
      <td> <app-diet-list-item
        [diet]="diet"
        [index]="diet._id"
        ></app-diet-list-item></td>
      <td><button class="delete-button" (click)="deleteItem(diet._id)">delete</button></td>
      <td><button class="button" (click)="copyItem(diet._id)">Copy</button></td>
      <td><button class="save-button button" *ngIf="diet.dietInUse">Diet in use</button></td>
    </tr>
  </table>

</div>
